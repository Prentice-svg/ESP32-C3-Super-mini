#ifndef OLED_TEST_H
#define OLED_TEST_H

#include <U8g2lib.h>

// ============================================
// OLED驱动对象声明
// ============================================

// U8g2软件SPI驱动实例
// 使用软件模拟SPI
// 参数说明:
//   U8G2_R0 - 0度旋转
//   OLED_SCK - 时钟GPIO
//   OLED_SDA - MOSI数据GPIO
//   OLED_CS - 片选GPIO
//   OLED_DC - 数据/命令选择GPIO
//   OLED_RES - 复位GPIO
extern U8G2_SH1106_128X64_NONAME_F_4W_SW_SPI u8g2;

// ============================================
// 初始化函数
// ============================================

/**
 * 初始化OLED屏幕
 * - 启动U8g2驱动
 * - 设置默认字体
 * - 清屏
 */
void initOLED();

/**
 * 初始化串口调试输出
 * - 波特率: 115200
 * - 打印启动信息
 */
void initSerial();

// ============================================
// 测试用例函数(5个测试阶段)
// ============================================

/**
 * 测试阶段1: 欢迎屏幕
 * 显示内容:
 *   - 标题 "OLED Test"
 *   - 副标题 "ESP32-C3 Display"
 *   - 屏幕边框
 */
void testWelcomeScreen();

/**
 * 测试阶段2: 基本图形(线、矩形)
 * 显示内容:
 *   - 水平线
 *   - 竖直线
 *   - 填充矩形
 *   - 空心矩形
 */
void testBasicShapes();

/**
 * 测试阶段3: 圆形绘制
 * 显示内容:
 *   - 空心圆(半径10)
 *   - 空心圆(半径8)
 *   - 填充圆(半径6)
 */
void testCircles();

/**
 * 测试阶段4: 文字显示
 * 显示内容:
 *   - 大号字体文本
 *   - 小号字体文本
 */
void testText();

/**
 * 测试阶段5: 综合显示测试
 * 显示内容:
 *   - 循环计数
 *   - 组合图形(线、圆、矩形)
 *   - 用于验证多个绘制功能协作
 */
void testCombined();

// ============================================
// 工具函数
// ============================================

/**
 * 获取当前测试阶段(0-4)
 * - 每个阶段持续TEST_STAGE_DURATION_MS毫秒
 * - 自动循环切换
 *
 * @return 当前测试阶段号(0-4)
 */
int getCurrentTestStage();

/**
 * 绘制屏幕边框
 * - 绘制整个屏幕的矩形边框
 * - 用于各个测试用例的装饰
 */
void drawBorder();

#endif // OLED_TEST_H
